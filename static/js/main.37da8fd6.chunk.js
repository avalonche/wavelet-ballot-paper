(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{105:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(37),l=n.n(c),o=(n(50),n(38));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(o.a,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},38:function(e,t,n){"use strict";(function(e){var a=n(5),r=n.n(a),c=n(39),l=n(9),o=n(4),s=n(0),u=n.n(s),i=n(10),m=n(21),b=n.n(m),d=n(1),p=n(41),f=n(25),x=n(18);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(n,!0).forEach(function(t){Object(c.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var h=n.n(x).a.BigInt;t.a=function(t){var n=b.a.FaucetButton,a=b.a.themes.mono,c=Object(s.useState)("https://testnet.perlin.net"),m=Object(o.a)(c,2),x=m[0],v=m[1],g=Object(s.useState)(e.from(i.Wavelet.generateNewWallet().secretKey,"binary").toString("hex")),O=Object(o.a)(g,2),w=O[0],j=O[1],y=Object(s.useState)(void 0),B=Object(o.a)(y,2),k=B[0],S=B[1],P=Object(s.useState)("38f54a1f52ec226a40d806156fb0434c71ae09fd0073aa3de2e0515a8948b0f3"),_=Object(o.a)(P,2),F=_[0],W=_[1],C=Object(s.useState)(void 0),A=Object(o.a)(C,2),I=A[0],N=A[1],R=Object(s.useState)(!1),L=Object(o.a)(R,2),K=L[0],T=L[1],D=Object(s.useState)(!1),U=Object(o.a)(D,2),J=U[0],V=U[1],q=Object(s.useState)(void 0),G=Object(o.a)(q,2),H=G[0],M=G[1],Y=Object(s.useState)(void 0),$=Object(o.a)(Y,2),z=$[0],Q=$[1],X=Object(s.useRef)(H),Z=Object(s.useRef)(z),ee=Object(s.useState)(void 0),te=Object(o.a)(ee,2),ne=te[0],ae=te[1],re=Object(s.useState)(void 0),ce=Object(o.a)(re,2),le=ce[0],oe=ce[1],se=Object(s.useState)([]),ue=Object(o.a)(se,2),ie=ue[0],me=ue[1],be=Object(s.useState)([]),de=Object(o.a)(be,2),pe=de[0],fe=de[1],xe=Object(s.useState)([]),ve=Object(o.a)(xe,2),Ee=ve[0],he=ve[1];Object(s.useEffect)(function(){X.current=H},[H]),Object(s.useEffect)(function(){Z.current=z},[z]);var ge=Object(s.useState)({accounts:void 0,contract:void 0,consensus:void 0}),Oe=Object(o.a)(ge,2),we=Oe[0],je=Oe[1],ye=Object(s.useRef)(we);Object(s.useEffect)(function(){ye.current=we},[we]);var Be=function(){S(void 0),M(void 0),Q(void 0),N(void 0),W(""),T(!1),V(!1),me([]),ae(void 0),oe(void 0),fe([]),he([]);var e=ye.current;e.accounts&&e.accounts.close(1e3,"connection closing normally"),e.contract&&e.contract.close(1e3,"connection closing normally"),e.consensus&&e.consensus.close(1e3,"connection closing normally"),je({accounts:void 0,consensus:void 0})},ke=function(){var t=Object(l.a)(r.a.mark(function t(){var n,a,c;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==k){t.next=23;break}return t.prev=1,n=new i.Wavelet(x),a=i.Wavelet.loadWalletFromPrivateKey(w),c=e.from(a.publicKey).toString("hex"),t.t0=M,t.next=8,n.getAccount(c);case 8:return t.t1=t.sent,(0,t.t0)(t.t1),S(n),t.next=13,n.pollAccounts({onAccountUpdated:function(e){switch(e.event){case"balance_updated":M(E({},X.current,{balance:e.balance}))}}},{id:c});case 13:we.accounts=t.sent,je(we),t.next=21;break;case 17:t.prev=17,t.t2=t.catch(1),Be(),alert(t.t2);case 21:t.next=24;break;case 23:Be();case 24:case"end":return t.stop()}},t,null,[[1,17]])}));return function(){return t.apply(this,arguments)}}(),Se=function(){var e=Object(l.a)(r.a.mark(function e(){var t,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Q,e.next=3,k.getAccount(F);case 3:return e.t1=e.sent,(0,e.t0)(e.t1),t=new i.Contract(k,F),e.next=8,t.init();case 8:return n=i.Wavelet.loadWalletFromPrivateKey(w),e.next=11,k.pollConsensus({onRoundEnded:function(e){void 0!==t&&Object(l.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchAndPopulateMemoryPages();case 2:fe(Fe(t.test(n,"get_vote_results",h(0))));case 3:case"end":return e.stop()}},e)}))()}});case 11:return we.consensus=e.sent,e.next=14,k.pollAccounts({onAccountUpdated:function(e){switch(e.event){case"gas_balance_updated":Q(E({},Z.current,{gas_balance:e.gas_balance}))}}},{id:F});case 14:we.contract=e.sent,je(we),ae(t.test(n,"get_vote_year",h(0)).logs),oe(t.test(n,"get_location",h(0)).logs),me(We(t.test(n,"get_candidates",h(0)))),fe(Fe(t.test(n,"get_vote_results",h(0)))),he(new Uint8Array(We(t.test(n,"get_candidates",h(0))).length)),N(t);case 22:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),Pe=function(){var e=Object(l.a)(r.a.mark(function e(){var t,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.Wavelet.loadWalletFromPrivateKey(w),n=I.test(t,"send_vote",h(0),h(25e4),h(0),{type:"bytes",value:Ee}),_e(n)){e.next=4;break}return e.abrupt("return");case 4:return e.next=7,I.call(t,"send_vote",h(0),h(25e4),h(0),{type:"bytes",value:Ee});case 7:he([]),T(!1),V(!0);case 10:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),_e=function(e){var t=e.result;return null!=t?(window.alert(t),0):1},Fe=function(e){var t=e.logs;return JSON.parse(t[0])},We=function(e){return e.logs[0].split("\n")};return u.a.createElement(u.a.Fragment,null,u.a.createElement(d.Flex,{flexWrap:"wrap",mx:-2},u.a.createElement(d.Box,{width:.5,px:3,pr:4},u.a.createElement(d.Box,{mb:4,alignItems:"center"},u.a.createElement("h1",{className:"text-center title",mb:4,pb:4},"LOAD ELECTION CONTRACT")),u.a.createElement(d.Flex,{mb:2,alignItems:"center"},u.a.createElement(d.Box,{flex:"0 0 80px"},u.a.createElement("label",null,"[node]")),u.a.createElement(d.Box,{flex:"1"},u.a.createElement(d.Flex,{width:"1"},u.a.createElement(d.Box,{flex:"1"},u.a.createElement("input",{type:"text",value:x,disabled:k,"data-lpignore":"true",onKeyPress:function(){var e=Object(l.a)(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==t.key){e.next=3;break}return e.next=3,ke();case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),onChange:function(e){return v(e.target.value)}}))))),u.a.createElement(d.Flex,{mb:2,alignItems:"center"},u.a.createElement(d.Box,{flex:"0 0 80px"},u.a.createElement("label",null,"[secret]")),u.a.createElement(d.Box,{flex:"1"},u.a.createElement("input",{type:"text",value:w,placeholder:"input unique secret...",disabled:k,"data-lpignore":"true",onChange:function(e){return j(e.target.value)}})),u.a.createElement(d.Box,{width:3/16,style:{minWidth:"10em"},ml:2},u.a.createElement("button",{style:{width:"100%"},onClick:ke,disabled:128!==w.length},k?"Disconnect":"Connect"))),u.a.createElement(d.Flex,{mb:4,alignItems:"center"},u.a.createElement(d.Box,{flex:"0 0 80px"},u.a.createElement("label",null,"[contract]")),u.a.createElement(d.Box,{flex:"1"},u.a.createElement(d.Flex,{width:1},u.a.createElement(d.Box,{width:.75},u.a.createElement("input",{type:"text",value:F,placeholder:"input ballot paper smart contract address...",disabled:!k,"data-lpignore":"true",onKeyPress:function(){var e=Object(l.a)(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==t.key){e.next=3;break}return e.next=3,Se();case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),onChange:function(e){return W(e.target.value)}})),u.a.createElement(d.Box,{width:.25,style:{minWidth:"10em"},ml:2},u.a.createElement("button",{style:{width:"100%"},disabled:!k||64!==F.length,onClick:Se},"Load Ballot Paper"))))),u.a.createElement(n,{modalHeader:!0,theme:a,style:{position:"fixed",right:"50px",bottom:"0px"},address:H&&H.public_key,classPrefix:"faucet"},"Faucet"),u.a.createElement(d.Box,{mt:4,mb:4,alignItems:"center"},u.a.createElement("h1",{className:"text-center title"},"CURRENT VOTING RESULTS")),pe.map(function(e){return u.a.createElement(d.Flex,{mb:4,alignItems:"center"},u.a.createElement(d.Box,{width:.75},u.a.createElement("label",null,e.candidate)),u.a.createElement(d.Box,{flex:"1"},e.points," point(s)"))})),u.a.createElement(d.Box,{width:.5,px:2},u.a.createElement(p.a,{src:"/logo-crest.png",sx:{width:["20%","25%"]}}),u.a.createElement(d.Box,{mb:4,alignItems:"center"},u.a.createElement("h1",{className:"text-center title",mb:4,pb:4},"BALLOT PAPER"),u.a.createElement("h2",null,"Year: ",ne),u.a.createElement("h2",null,"Location: ",le)),ie.map(function(e,t){return u.a.createElement(d.Flex,{mb:4,alignItems:"center"},u.a.createElement(d.Box,{width:"4em",style:{minWidth:"4em"},ml:2},u.a.createElement(f.b,{name:e,defaultValue:"0",onChange:function(e){return function(e,t,n){e=parseInt(e),Ee[n]=e,T(!0)}(e.target.value,0,t)}},u.a.createElement("option",{value:"0",disabled:!0}),ie.map(function(e,t){return u.a.createElement("option",{value:ie.length-t},t+1)}))),u.a.createElement(d.Box,{flex:"1"},u.a.createElement(f.a,{px:4},e)))}),u.a.createElement(d.Flex,null,u.a.createElement(d.Box,{width:.5}," "),u.a.createElement(d.Box,{flex:"1",width:5/17,mb:4},u.a.createElement("button",{className:"fw",style:{height:"98%"},disabled:!k||!I||!H||H.balance<2||z.gas_balance+H.balance<25e4||!K||J,onClick:Pe},"Submit Vote"))),u.a.createElement(d.Flex,{mb:2,style:{textAlign:"right"}},u.a.createElement(d.Box,{flex:"0 0 150px"},u.a.createElement("label",null,"Balance")),u.a.createElement(d.Box,{flex:"1"},u.a.createElement("span",null,"".concat(H&&H.balance?H.balance:0," PERL(s)")))))))}}).call(this,n(15).Buffer)},45:function(e,t,n){e.exports=n(105)},50:function(e,t,n){},74:function(e,t){}},[[45,1,2]]]);
//# sourceMappingURL=main.37da8fd6.chunk.js.map